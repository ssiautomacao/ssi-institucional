---
import { Image } from 'astro:assets';
import zeus1 from '../assets/tech/zeus-1.png';
import zeus2 from '../assets/tech/zeus-2.png';
import zeus3 from '../assets/tech/zeus-3.png';
---

<div class="zeus-monitor-wrapper w-full max-w-4xl mx-auto my-12">
    <figure class="relative">
        <figcaption class="sr-only">Demonstração visual da metodologia de análise de risco HRN</figcaption>
        
        <!-- Monitor Bezel/Glow Container -->
        <div class="relative rounded-lg bg-slate-900 p-1 shadow-[0_0_24px_-8px_rgba(0,180,200,0.35)] border border-slate-800/50">
            <!-- Screen Shine/Reflection (Top) -->
            <div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-cyan-500/50 to-transparent z-20"></div>

            <!-- The Screen -->
            <div class="relative w-full aspect-video bg-black rounded overflow-hidden isolate">
                <!-- Grid Background (Optional Tech Feel) -->
                <div class="absolute inset-0 opacity-10 pointer-events-none z-0" 
                    style="background-image: linear-gradient(rgba(6,182,212,0.3) 1px, transparent 1px), linear-gradient(90deg, rgba(6,182,212,0.3) 1px, transparent 1px); background-size: 40px 40px;">
                </div>

                <!-- Images Stack -->
                <div id="zeus-slideshow" class="absolute inset-0 w-full h-full">
                    <div class="zeus-slide absolute inset-0 transition-opacity duration-[1500ms] ease-in-out opacity-100 z-10">
                        <Image src={zeus1} alt="Interface de Análise HRN - Tela 1" class="w-full h-full object-cover" aria-hidden="true" />
                    </div>
                    <div class="zeus-slide absolute inset-0 transition-opacity duration-[1500ms] ease-in-out opacity-0 z-10">
                        <Image src={zeus2} alt="Interface de Análise HRN - Tela 2" class="w-full h-full object-cover" aria-hidden="true" />
                    </div>
                    <div class="zeus-slide absolute inset-0 transition-opacity duration-[1500ms] ease-in-out opacity-0 z-10">
                        <Image src={zeus3} alt="Interface de Análise HRN - Tela 3" class="w-full h-full object-cover" aria-hidden="true" />
                    </div>
                </div>
                
                <!-- Scanline Overlay (Retro/Tech feel subtil) -->
                <div class="absolute inset-0 z-20 pointer-events-none bg-[url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAADCAYAAABS3WWCAAAAE0lEQVQIW2P4//+/PxMDAwMjAwA9AgL+K4747AAAAABJRU5ErkJggg==')] opacity-[0.03] mix-blend-overlay"></div>
            </div>
            
            <!-- Bottom Glow -->
            <div class="absolute bottom-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-blue-500/50 to-transparent z-20"></div>
        </div>

        <!-- UI Caption -->
        <div class="mt-4 text-center">
            <p class="text-sm text-slate-500 font-medium">
                Visualização conceitual da abordagem HRN aplicada em projetos de engenharia.
            </p>
        </div>
    </figure>
</div>

<script>
    function startZeusSlideshow() {
        const slides = document.querySelectorAll('.zeus-slide');
        if (slides.length === 0) return;

        let currentIndex = 0;
        const displayTime = 4000; // 4 seconds visible

        setInterval(() => {
            const nextIndex = (currentIndex + 1) % slides.length;
            
            // Current slide fade out
            slides[currentIndex].classList.remove('opacity-100');
            slides[currentIndex].classList.add('opacity-0');

            // Next slide fade in
            slides[nextIndex].classList.remove('opacity-0');
            slides[nextIndex].classList.add('opacity-100');

            currentIndex = nextIndex;
        }, displayTime + 1500); // Wait for transition? No, Interval should capture the full cycle. 
        // Actually, if transition is 1.5s, we want it to stay visible for 4s, then start fading.
        // If we set interval = 4000 + 1500, it stays fully opaque for ~4000? 
        // CSS transition happens immediately on class change.
        // So at T=0, switch. T=1.5s transition done. T=5.5s switch again.
        // Visible time full opaque = Interval - Transition time = 5500 - 1500 = 4000. Correct.
    }

    // Run on load and view transitions
    document.addEventListener('astro:page-load', startZeusSlideshow);
    // Also run immediately if not using view transitions or first load
    startZeusSlideshow();
</script>
