---
// src/components/EvidenceGallery.astro
// Displays evidence images for MethodologyBlock or DeliverablesBlock sections.
// Each item receives {src, alt, caption?} â€” zero hardcoded values.

import { resolveAsset } from '../utils/assets';

interface EvidenceItem {
  src: string;
  alt: string;
  caption?: string;
}

interface Props {
  items: EvidenceItem[];
  columns?: 1 | 2 | 3;
}

const { items, columns = 2 } = Astro.props;
const BASE = import.meta.env.BASE_URL;

const gridClass = {
  1: 'grid-cols-1',
  2: 'grid-cols-1 sm:grid-cols-2',
  3: 'grid-cols-1 sm:grid-cols-2 lg:grid-cols-3',
}[columns];
---

<div class={`grid ${gridClass} gap-6`}>
  {items.map((item) => (
    <figure class="overflow-hidden rounded-xl bg-slate-100 shadow-md group">
      <div class="relative aspect-video overflow-hidden">
        <img
          src={resolveAsset(item.src, BASE)}
          alt={item.alt}
          class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
          loading="lazy"
          decoding="async"
        />
      </div>
      {item.caption && (
        <figcaption class="px-4 py-3 text-xs text-slate-500 font-medium border-t border-slate-200 bg-white">
          {item.caption}
        </figcaption>
      )}
    </figure>
  ))}
</div>
